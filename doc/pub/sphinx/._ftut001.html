<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Preface</title>
    
    <link rel="stylesheet" href="_static/fenics.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <script src="http://sagecell.sagemath.org/static/jquery.min.js"></script>
        <script src="http://sagecell.sagemath.org/static/embedded_sagecell.js"></script>

        <script>sagecell.makeSagecell({inputLocation: ".sage"});</script>

        <style type="text/css">
                .sagecell .CodeMirror-scroll {
                        overflow-y: hidden;
                        overflow-x: auto;
                }
                .sagecell .CodeMirror {
                        height: auto;
                }
        </style>

    
    <link rel="top" title="The FEniCS Tutorial" href="index.html" />
    <link rel="next" title="The fundamentals" href="._ftut002.html" />
    <link rel="prev" title="The FEniCS Tutorial" href="._ftut000.html" />

<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

<link rel="stylesheet" href="_static/featured.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script src="_static/slides.min.jquery.js"></script>
  <script>
	$(function(){
		$('#products').slides({
			preload: true,
			preloadImage: 'img/loading.gif',
			effect: 'slide, fade',
			crossfade: true,
			slideSpeed: 350,
			fadeSpeed: 500,
			generateNextPrev: true,
			generatePagination: false,
	                play: 5000,
                        hoverPause: false,
                        animationStart: function(current){
				$('.caption').animate({
					bottom:-35
				},100);
				if (window.console && console.log) {
					// example return of current slide number
					console.log('animationStart on slide: ', current);
				};
			},
			animationComplete: function(current){
				$('.caption').animate({
					bottom:0
				},200);
				if (window.console && console.log) {
					// example return of current slide number
					console.log('animationComplete on slide: ', current);
				};
			},
			slidesLoaded: function() {
				$('.caption').animate({
					bottom:0
				},200);
			}
		});
	});
  </script>


<link rel="shortcut icon" href="_static/fenics.ico" />


  
       <style type="text/css">
         div.admonition {
           background-color: whiteSmoke;
           border: 1px solid #bababa;
         }
       </style>
      </head>
    
  <body role="document">
<div class="wrapper">
  <a href="http://fenicsproject.org/"><img src="_static/fenics_banner.png" width="900px" alt="FEniCS Project Banner" /></a>
  <div id="access">
    <div class="menu">
      <ul>
	<li><a href="._ftut000.html" title="Previous page"><font color="red">Prev</font></a></li>
	<li><a href="._ftut002.html" title="Next page"><font color="red">Next</font></a></li>
	<li class="page_item"><a href="index.html" title="Table of contents for this document">&nbsp;Table of contents</a></li>
	<li class="page_item"><a href="http://fenicsproject.org/about/" title="Find out more about the FEniCS project">About</a></li>
	<li class="page_item"><a href="http://fenicsproject.org/download/" title="Obtain the FEniCS project">Download</a></li>
	<li class="page_item"><a href="http://fenicsproject.org/documentation/" title="Learn how to use the FEniCS project">Documentation</a></li>
	<li class="page_item"><a href="http://fenicsproject.org/applications/" title="Learn how others are using the FEniCS project">Applications</a></li>
	<li class="page_item"><a href="http://fenicsproject.org/contributing/" title="Learn how to contribute to the FEniCS project">Contributing</a></li>
	<li class="page_item"><a href="http://fenicsproject.org/citing/" title="Learn how to cite the FEniCS project">Citing</a></li>
	<li class="page_item"><a href="http://fenicsproject.org/support/" title="Where to go for more help">Support</a></li>
      </ul>
    </div><!-- .menu -->
  </div><!-- #access -->
</div><!-- #wrapper -->


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="preface">
<h1>Preface<a class="headerlink" href="#preface" title="Permalink to this headline">Â¶</a></h1>
<p>FEniCS is a user-friendly tool for solving partial differential
equations (PDEs). The goal of this tutorial is to get you started with
FEniCS through a series of simple examples that demonstrate</p>
<blockquote>
<div><ul class="simple">
<li>how to define the PDE problem in terms of a variational problem,</li>
<li>how to define simple domains,</li>
<li>how to deal with Dirichlet, Neumann, and Robin conditions,</li>
<li>how to deal with variable coefficients,</li>
<li>how to deal with domains built of several materials (subdomains),</li>
<li>how to compute derived quantities like the flux vector field or
a functional of the solution,</li>
<li>how to quickly visualize the mesh, the solution, the flux, etc.,</li>
<li>how to solve nonlinear PDEs in various ways,</li>
<li>how to deal with time-dependent PDEs,</li>
<li>how to set parameters governing solution methods for linear systems,</li>
<li>how to create domains of more complex shape.</li>
</ul>
</div></blockquote>
<p>The mathematics of the illustrations is kept simple to better focus
on FEniCS functionality and syntax. This means that we mostly use
the Poisson equation and the time-dependent diffusion equation
as model problems, often with input data adjusted such that we get
a very simple solution that can be exactly reproduced by any standard
finite element method over a uniform, structured mesh. This
latter property greatly simplifies the verification of the implementations.
Occasionally we insert a physically more relevant example
to remind the reader that changing the PDE and boundary
conditions to something more real might often be a trivial task.</p>
<p>FEniCS may seem to require a thorough understanding of the abstract
mathematical version of the finite element method as well as
familiarity with the Python programming language.  Nevertheless, it
turns out that many are able to pick up the fundamentals of finite
elements <em>and</em> Python programming as they go along with this
tutorial. Simply keep on reading and try out the examples. You will be
amazed of how easy it is to solve PDEs with FEniCS!</p>
<p>Reading this tutorial obviously requires access to a machine where the
FEniCS software is installed. The section <a class="reference internal" href="._ftut003.html#tut-app-install"><span class="std std-ref">Installing FEniCS</span></a> explains
briefly how to install the necessary tools.</p>
<p>[<strong>hpl 1</strong>: Rethink how to organize program examples!]
[<strong>hpl 2</strong>: Drop transient and stationary.]</p>
<p>All the examples discussed in the following are available as
executable Python source code files in a <a class="reference external" href="https://github.com/hplgit/fenics-tutorial/blob/master/src">directory tree</a>.
File paths reflect the nature of the PDE problem being solved. For
example, <code class="docutils literal"><span class="pre">poisson/p2D_iter.py</span></code> has a descriptive directory
path and a very brief Unix-style filename (here <code class="docutils literal"><span class="pre">p2D</span></code> for Poisson 2D
problem, and <code class="docutils literal"><span class="pre">_iter</span></code> for a version with iterative linear solvers).</p>
<p><strong>The FEniCS version.</strong>
This document is up-to-date with FEniCS version 1.6. To see which version
you have, run the following command in a Unix/Linux terminal window if
you run Python version 2.7:</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; python -c &#39;import fenics; print fenics.__version__&#39;
1.6.0
</pre></div>
</div>
<p>In Python version 3.x you must write</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; python -c &#39;import fenics; print(fenics.__version__)&#39;
1.6.0
</pre></div>
</div>
<p><strong>The Python version.</strong>
Python comes in two versions, 2 and 3, and these are not compatible.
FEniCS has a code base that runs under both versions.
All the programs in this tutorial are also developed such that they
can be run under both Python 2 and 3. Programs that need to print must
then start with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
</pre></div>
</div>
<p>to  enable the <code class="docutils literal"><span class="pre">print</span></code> function from Python 3 in Python 2. All
use of <code class="docutils literal"><span class="pre">print</span></code> in the programs consists of function calls, like
<code class="docutils literal"><span class="pre">print('a:',</span> <span class="pre">a)</span></code>. Almost all other constructions are of a form that looks the
same in Python 2 and 3.</p>
<div class="section" id="acknowledgments">
<h2>Acknowledgments<a class="headerlink" href="#acknowledgments" title="Permalink to this headline">Â¶</a></h2>
<p>We thank Johan Hake, Kent-Andre Mardal, and Kristian Valen-Sendstad
for promptly answering all questions about FEniCS functionality and
for implementing all requests when preparing the first version of this
tutorial for the FEniCS book <a class="reference internal" href="._ftut004.html#ref01" id="id1">[Ref01]</a>.  We are particularly thankful to
Professor Douglas Arnold for very valuable feedback on early
versions of the text.  Ãystein SÃ¸rensen pointed out a lot of typos and
contributed with many helpful comments.  Many errors and typos were
also reported by Mauricio Angeles, Ida DrÃ¸sdal, Miroslav Kuchta, Hans
Ekkehard Plesser, Marie Rognes, and Hans Joachim (Achim) Scroll.
Ekkehard Ellmann as well as two anonymous reviewers provided a series
of suggestions and improvements.</p>
<div class="section" id="to-do-list">
<h3>To-do list<a class="headerlink" href="#to-do-list" title="Permalink to this headline">Â¶</a></h3>
<p>Remember: cannot exceed 150 pages (as reported at the end of <code class="docutils literal"><span class="pre">ftut.log</span></code>).
Solutions to exercises will not appear in the printed book. If we run
out of pages, we can also remove the exercises by putting if-else
constructs around them. There will be one short printed tutorial and
then extended e-versions with exercises (and optionally solution) on our
github web site.</p>
<p>Regarding layout, we must use <code class="docutils literal"><span class="pre">svmono.cls</span></code> for the printed book, but
are allowed to use gray background in code boxes and lmodern instead
of Courier for monospace font. Springer&#8217;s official ebook has exactly
the same layout. For all other versions on our github
web site, we can choose whatever layout we want.</p>
<blockquote>
<div><ul class="simple">
<li>Reorganize sections into chapters. (HPL)</li>
<li>Rethink how to organize example programs in directories.
Find a naming convention. (AL)
HPL suggestion: Drop the <code class="docutils literal"><span class="pre">stationary</span></code> and <code class="docutils literal"><span class="pre">transient</span></code> directories,
have at most separate directories for each PDE.</li>
<li>Programs are now flat demos. Educate the reader with
better software engineering habits: functions, classes, unit tests.
Avoid copy-and-edit flat programs implied by today&#8217;s collection. (HPL)</li>
<li>Compute maximum error already in the first example so we can create
a unit test as early as possible. (Done, HPL)</li>
<li>Find successful exercises from various tutorials (AL) and add as
exercises in the book (HPL/AL). Exercises are key for learning
software so having them (in an extended version?) sends an important
signal about their relevance.</li>
<li>Write about installation in a way that does not get outdated.
More as a guide to a newcomer: What to choose? (AL)</li>
<li>Multi-boundary examples do not work with FEniCS 1.6: <code class="docutils literal"><span class="pre">dnr*.py</span></code>. (AL)</li>
<li><code class="docutils literal"><span class="pre">membrane2.py</span></code> referred to, but it is still in sandbox. (HPL)</li>
<li>Meshr domains. Set up some common continuum mechanics examples first. (HPL/AL)</li>
<li>Decide on an elasticity problem.</li>
<li>Simple Navier-Stokes solver. Do backward facing step and flow around a
cylinder.</li>
<li>According to the <code class="docutils literal"><span class="pre">plot</span></code> doc string, it should be easy to
plot the element a la <code class="docutils literal"><span class="pre">plot(u.function_space().ufl_element())</span></code> but I
did not get this to work. Not crucial, but plotting the element is a
nice feature :-)</li>
<li>Show how the definition of boundaries can be done via strings
compiled to C++ (as soon as we have an example with non-trivial
boundary segments), cf. Navier-Stokes FEniCS demo.</li>
<li>Can we change the value of <code class="docutils literal"><span class="pre">DOLFIN_EPS</span></code>? <code class="docutils literal"><span class="pre">imort</span> <span class="pre">fenics;</span> <span class="pre">fenics.DOLFIN_EPS=...</span></code> will work, but then all modules in the simulator must do <code class="docutils literal"><span class="pre">import</span> <span class="pre">fenics</span></code>. Note that its value is very strict, e.g., <code class="docutils literal"><span class="pre">10.1+10.2</span></code> has rounding <span class="math">\(3.5 10^{-15}\)</span>, so <code class="docutils literal"><span class="pre">DOLFIN_EPS</span></code> is strictly for scaled problems only, where all variables are in <span class="math">\([0,1]\)</span>.</li>
<li>Comment regarding FEniCS demos: The documented demos mention a lot
of packages: DOLFIN, FFC, Fiat, ... Make sure the reader of the tutorial
does not get lost in the jungle of packages and make sure the names are
explained somewhere in the text
such that the tutorial is a good background for
understanding every demo in every detail.</li>
<li>Specifications of boundaries (<code class="docutils literal"><span class="pre">SubDomain</span></code>) can be done by a C++
string as in <code class="docutils literal"><span class="pre">DirichletBC(V,</span> <span class="pre">(0,0),</span> <span class="pre">'on_boundary</span> <span class="pre">&amp;&amp;</span> <span class="pre">x[0]</span> <span class="pre">&lt;</span> <span class="pre">DOLFIN_EPS')</span></code>.
This is an important performance enhancement for large meshes in time
dependent problems so it should be documented.</li>
</ul>
</div></blockquote>
<div class="section" id="hpl-questions">
<h4>HPL questions<a class="headerlink" href="#hpl-questions" title="Permalink to this headline">Â¶</a></h4>
</div>
</div>
</div>
<div class="section" id="iterative-linear-solvers-info">
<h2>Iterative linear solvers info<a class="headerlink" href="#iterative-linear-solvers-info" title="Permalink to this headline">Â¶</a></h2>
<p>We can get this printed out on the screen, but is there any method to
extract this text inside the program, such that we can see how many
Krylov iterations we do etc.? Any way for Python to capture the standard
output stream in C++?</p>
<p>Easy to write a script that post-processes
the output, but we have to wait until the simulator has terminated, or
we can pipe to a script <code class="docutils literal"><span class="pre">process.py</span></code> that treats the output in some
desired way (could append some into to a file and that is reopened
by the simulator):</p>
<div class="highlight-text"><div class="highlight"><pre>Terminal&gt; python mysolver.py | process.py
</pre></div>
</div>
<p>where the simplest <code class="docutils literal"><span class="pre">process.py</span></code> is</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">time</span>
<span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">()</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">()</span>
    <span class="k">print</span> <span class="s">&#39;after </span><span class="si">%g</span><span class="s"> seconds: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>
<span class="k">print</span> <span class="s">&#39;END&#39;</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="wrapper">
  <div class="footer">
    <div class="footer-nav">
      <div class="span-6">
	<h4>Usage documentation</h4>
	<ul>
	  <li><a href="http://fenicsproject.org/documentation/tutorial/">Tutorial</a></li>
	  <li><a href="http://fenicsproject.org/documentation/dolfin/dev/python/">Python API</a></li>
	  <li><a href="http://fenicsproject.org/documentation/dolfin/dev/cpp/">C++ API</a></li>
          <li><a href="http://fenicsproject.org/releases/">Release notes</a></li>
	</ul>
      </div>
      <div class="span-6">
	<h4>Developer resources</h4>
	<ul>
	  <li><a href="http://fenicsproject.org/buildbot/">Buildbot</a></li>
	  <li><a href="http://fenicsproject.org/benchbot/">Benchbot</a></li>
	  <li><a href="http://fenicsproject.org/support/launchpad_pages.html">FEniCS on Launchpad</a></li>
	</ul>
      </div>
      <div class="span-6 last">
	<h4>Search this site</h4>
	<div id="searchbox">
	  <form class="search" action="/search.html" method="get">
	    <input type="text" name="q" size="18" />
	    <input type="submit" value="Go" />
	    <input type="hidden" name="check_keywords" value="yes" />
	    <input type="hidden" name="area" value="default" />
	  </form>
	</div>
      </div>
    </div>
    &copy; <a href="http://fenicsproject.org/">The FEniCS Project</a>. (<a href="http://fenicsproject.org/disclaimer.html">Disclaimer</a>)
  </div>
</div>

  </body>
</html>